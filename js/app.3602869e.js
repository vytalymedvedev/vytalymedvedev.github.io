(function(){"use strict";var t={1586:function(t,e,o){var s=o(6369),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("HeaderCommon"),e(t.currentView,{tag:"component"})],1)},n=[],r=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,e=t._self._c;return e("main",{staticClass:"welcomePage"},[e("div",{staticClass:"welcomePage--text"},[e("h1",{staticClass:"title"},[t._v(" Мои заметки ")]),e("div",{staticClass:"subtitle"},[t._v(" Не забывай о важном, храни его в облаке. ")])]),e("div",{staticClass:"welcomePage--board"})])}],l={name:"WelcomePage",props:{msg:String}},u=l,c=o(1001),d=(0,c.Z)(u,r,i,!1,null,"4eac7535",null),m=d.exports,h=function(){var t=this,e=t._self._c;return e("main",{staticClass:"note-page"},[t.showModal?e("NoteModal",{on:{close:t.toggleShowModal,add:t.handleAddNote}}):t._e(),e("div",{staticClass:"note-page__table"},t._l(t.notes,(function(o){return e("NotePrimary",{key:o.id,attrs:{title:o.title,content:o.content},on:{remove:function(e){return t.handleRemoveNote(o.id)}}})})),1),e("button-primary",{staticClass:"note-page__add-note-button",on:{click:t.toggleShowModal}},[e("template",{slot:"icon"},[e("img",{staticClass:"note-page__add-note-button-icon",attrs:{src:"/plus.svg",alt:"remove icon"}})])],2)],1)},p=[],g=function(){var t=this,e=t._self._c;return e("modal-custom",{attrs:{submit:t.handleAddNote},on:{close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"header",fn:function(){return[e("h2",[t._v("Добавление заметки")])]},proxy:!0},{key:"body",fn:function(){return[e("div",{staticClass:"modal__body"},[e("input-custom",{attrs:{inputLabel:"Название заметки",placeholder:"Введите название",showMaxlength:"",errorMessage:t.noteTitleErrorMessage,required:""},model:{value:t.noteTitle,callback:function(e){t.noteTitle=e},expression:"noteTitle"}}),e("textarea-custom",{attrs:{label:"Текст заметки",placeholder:"Введите текст",showMaxlength:"",errorMessage:t.noteContentErrorMessage,required:""},model:{value:t.noteContent,callback:function(e){t.noteContent=e},expression:"noteContent"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"modal__footer"},[e("button-primary",{staticClass:"add-button",attrs:{type:"submit"}},[e("template",{slot:"text"},[e("span",[t._v("Добавить")])])],2)],1),t.hasError?e("div",{staticClass:"text-small errorMessage"},[t._v(t._s(t.errorMessage))]):t._e()]},proxy:!0}])})},f=[],_=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("form",{staticClass:"modal-container",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("button-primary",{staticClass:"modal-default-button",on:{click:function(e){return t.$emit("close")}}},[e("template",{slot:"icon"},[e("img",{staticClass:"modal--button-image",attrs:{src:"/cross.svg",alt:"enter icon"}})])],2),e("div",{staticClass:"modal-header"},[t._t("header")],2),e("div",{staticClass:"modal-body"},[t._t("body")],2),e("div",{staticClass:"modal-footer"},[t._t("footer")],2)],1)])])])},v=[],w=function(){var t=this,e=t._self._c;return e("button",{staticClass:"button",attrs:{type:t.type,disabled:t.disabled},on:{click:function(e){return t.$emit("click")}}},[t._t("icon"),t._t("text")],2)},y=[],b={name:"ButtonPrimary",props:{disabled:Boolean,type:{type:String,default:"button"}}},x=b,C=(0,c.Z)(x,w,y,!1,null,"35ae5ee6",null),M=C.exports,k={name:"ModalCustom",components:{ButtonPrimary:M},props:{submit:Function}},S=k,P=(0,c.Z)(S,_,v,!1,null,"44d06178",null),N=P.exports,$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"inputCustom"},[e("label",{staticClass:"text-small label",attrs:{for:t.uniqueId}},[t._v(" "+t._s(t.inputLabel))]),e("input",{staticClass:"text-small field",attrs:{type:t.inputType,placeholder:t.placeholder,disabled:t.disabled,id:t.uniqueId,maxlength:t.maxlength,required:t.required},domProps:{value:t.value},on:{input:t.onInput}}),t.secured?e("div",{staticClass:"toggleSecure",on:{click:t.toggleSecure}},[e("img",{staticClass:"toggleSecure__icon",attrs:{src:t.secureIconSrc,alt:"secure icon"}})]):t._e(),e("div",{staticClass:"field__footnote"},[t.errorMessage?.length?e("span",{staticClass:"text-small errorMessage"},[t._v(" "+t._s(t.errorMessage))]):t._e(),t.showMaxlength?e("div",{staticClass:"text-small maxlength"},[t._v(" "+t._s(t.textLength))]):t._e()])])},Z=[];const I={data(){return{uniqueId:""}},mounted(){this.uniqueId=(Math.random()+1).toString(36).substring(7)},computed:{textLength(){return`${this.value?.length}/${this.maxlength}`}},methods:{onInput(t){this.$emit("input",t.target.value)}}};var T={name:"InputCustom",props:{inputLabel:String,value:String,placeholder:String,disabled:Boolean,errorMessage:String,secured:Boolean,required:Boolean,maxlength:{type:Number,default:100},showMaxlength:Boolean},mixins:[I],data(){return{showValue:!1}},computed:{secureIconSrc(){return this.showValue?"/off-password.svg":"/on-password.svg"},inputType(){return this.secured?this.showValue?"text":"password":"text"}},methods:{toggleSecure(){this.showValue=!this.showValue}}},B=T,L=(0,c.Z)(B,$,Z,!1,null,"2e4238d6",null),q=L.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"textareaCustom"},[e("label",{staticClass:"text-small label",attrs:{for:t.uniqueId}},[t._v(" "+t._s(t.label))]),e("textarea",{staticClass:"text-small field",attrs:{type:"text",placeholder:t.placeholder,disabled:t.disabled,required:t.required,id:t.uniqueId,maxlength:t.maxlength},domProps:{value:t.value},on:{input:t.onInput}}),e("div",{staticClass:"field__footnote"},[t.errorMessage?.length?e("span",{staticClass:"text-small errorMessage"},[t._v(" "+t._s(t.errorMessage))]):t._e(),t.showMaxlength?e("div",{staticClass:"text-small maxlength"},[t._v(" "+t._s(t.textLength))]):t._e()])])},E=[],R={name:"TextareaCustom",props:{label:String,value:String,placeholder:String,errorMessage:String,disabled:Boolean,required:Boolean,maxlength:{type:Number,default:500},showMaxlength:Boolean},mixins:[I]},O=R,j=(0,c.Z)(O,A,E,!1,null,"05935462",null),V=j.exports,z=o(1076);const H="https://dist.nd.ru/",F=async t=>z.Z.post(`${H}api/reg`,t),G=async t=>z.Z.post(`${H}api/auth`,t),W=async t=>z.Z.delete(`${H}api/auth`,{headers:{Authorization:`Bearer ${t}`}}),U=async t=>z.Z.get(`${H}api/notes`,{headers:{Authorization:`Bearer ${t}`}}),D=async(t,e)=>z.Z.post(`${H}api/notes`,t,{headers:{Authorization:`Bearer ${e}`}}),J=async(t,e)=>z.Z.delete(`${H}api/notes/${t}`,{headers:{Authorization:`Bearer ${e}`}}),K={methods:{handleErrorResponse(t){"string"!==typeof t?Array.isArray(t)?this.errorMessage=t.reduce(((t,e)=>`${t}${e} `),""):this.errorMessage="Неожидаемая ошибка!":this.errorMessage=t}}};var Q={name:"NoteModal",components:{ModalCustom:N,InputCustom:q,ButtonPrimary:M,TextareaCustom:V},mixins:[K],data(){return{noteTitle:"",noteContent:"",errorMessage:"",noteTitleErrorMessage:"",noteContentErrorMessage:"",token:window.localStorage.getItem("access_token")}},computed:{hasError(){return this.errorMessage.length}},methods:{async handleAddNote(){this.errorMessage="";try{await D({title:this.noteTitle,content:this.noteContent},this.token),this.$emit("add")}catch(t){console.log(t),this.handleErrorResponse(t?.response?.data?.message)}}}},X=Q,Y=(0,c.Z)(X,g,f,!1,null,"1185c49e",null),tt=Y.exports,et=function(){var t=this,e=t._self._c;return e("div",{staticClass:"note"},[e("div",{staticClass:"note--header"},[e("h4",[t._v(" "+t._s(t.title)+" ")])]),e("div",{staticClass:"note--line"}),e("div",{staticClass:"text-normal note--body"},[e("div",{staticClass:"note--body-content"},[t._v(" "+t._s(t.content)+" ")])]),e("div",{staticClass:"note--footer"},[e("button-primary",{staticClass:"note--footer-button",on:{click:function(e){return t.$emit("remove")}}},[e("template",{slot:"icon"},[e("img",{staticClass:"note--footer-image",attrs:{src:"/cross.svg",alt:"remove icon"}})]),e("template",{slot:"text"},[e("span",[t._v("Удалить")])])],2)],1)])},ot=[],st={name:"NotePrimary",components:{ButtonPrimary:M},props:{title:String,content:String}},at=st,nt=(0,c.Z)(at,et,ot,!1,null,"026f7345",null),rt=nt.exports,it={name:"NotePage",components:{ButtonPrimary:M,NotePrimary:rt,NoteModal:tt},async created(){this.token?await this.handleGetNotes():window.location.href="/"},data(){return{token:window.localStorage.getItem("access_token"),showModal:!1,notes:[]}},methods:{getNotes:U,deleteNote:J,toggleShowModal(){this.showModal=!this.showModal},async handleAddNote(){this.showModal=!1,await this.handleGetNotes()},async handleGetNotes(){try{const{data:t}=await this.getNotes(this.token);this.notes=[...t]}catch(t){console.error(t)}},async handleRemoveNote(t){try{await this.deleteNote(t,this.token),await this.handleGetNotes()}catch(e){console.error(e)}}}},lt=it,ut=(0,c.Z)(lt,h,p,!1,null,"6e3015be",null),ct=ut.exports,dt=function(){var t=this;t._self._c;return t._m(0)},mt=[function(){var t=this,e=t._self._c;return e("main",{staticClass:"notFoundPage"},[e("h2",[t._v(" Not found ")])])}],ht={name:"WelcomePage",props:{msg:String}},pt=ht,gt=(0,c.Z)(pt,dt,mt,!1,null,"128d3620",null),ft=gt.exports,_t=function(){var t=this,e=t._self._c;return e("header",{staticClass:"header"},[e("img",{staticClass:"header--logo",attrs:{src:"/logo.svg",alt:"logo"}}),t.userEmail?e("user-profile",{attrs:{email:t.userEmail},on:{logout:t.handleLogout}}):e("button-primary",{staticClass:"header--button",on:{click:t.handleShowModal}},[e("template",{slot:"icon"},[e("img",{staticClass:"header--button-image",attrs:{src:"/enter.svg",alt:"enter icon"}})]),e("template",{slot:"text"},[e("span",[t._v("Вход")])])],2),t.showModal?e("login-modal",{on:{close:t.handleHideModal,authorized:t.onAuthorized}}):t._e()],1)},vt=[],wt=function(){var t=this,e=t._self._c;return e("modal-custom",{attrs:{submit:t.handleSubmit},on:{close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"header",fn:function(){return[e("h2",[t._v(t._s(t.headerText))])]},proxy:!0},{key:"body",fn:function(){return[e("div",{staticClass:"modal--body"},[e("input-custom",{attrs:{inputLabel:"Email",placeholder:"Введите Email",required:""},model:{value:t.email,callback:function(e){t.email="string"===typeof e?e.trim():e},expression:"email"}}),e("input-custom",{attrs:{secured:"",inputLabel:"Пароль",placeholder:"Введите пароль",required:""},model:{value:t.password,callback:function(e){t.password="string"===typeof e?e.trim():e},expression:"password"}}),t.registration?e("input-custom",{attrs:{secured:"",inputLabel:"Пароль ещё раз",placeholder:"Введите пароль",required:""},model:{value:t.passwordRepeat,callback:function(e){t.passwordRepeat="string"===typeof e?e.trim():e},expression:"passwordRepeat"}}):t._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"modal--footer"},[e("button-primary",{staticClass:"login-button",attrs:{type:"submit"}},[e("template",{slot:"text"},[e("span",[t._v(t._s(t.enterText))])])],2),e("div",{staticClass:"modal__footer-note"},[t.registration?[e("div",{staticClass:"text-small modal--footer-text modal--footer-text__enter"},[t._v(" У вас есть аккаунт?  ")]),e("link-primary",{staticClass:"modal--footer-link",on:{click:t.toggleRegistration}},[t._v(" Войдите ")])]:[e("div",{staticClass:"text-small modal--footer-text"},[t._v(" У вас нет аккаунта?  ")]),e("link-primary",{staticClass:"modal--footer-link",on:{click:t.toggleRegistration}},[t._v(" Зарегистрируйтесь ")])]],2)],1),t.errorMessage?.length?e("div",{staticClass:"text-small errorMessage"},[t._v(t._s(t.errorMessage))]):t._e()]},proxy:!0}])})},yt=[],bt=function(){var t=this,e=t._self._c;return e("a",{staticClass:"link",attrs:{href:t.href,tabindex:"0"},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)},xt=[],Ct={name:"LinkPrimary",props:{href:String}},Mt=Ct,kt=(0,c.Z)(Mt,bt,xt,!1,null,"711b28e1",null),St=kt.exports,Pt={name:"LoginModal",components:{ModalCustom:N,InputCustom:q,ButtonPrimary:M,LinkPrimary:St},mixins:[K],data(){return{email:"",password:"",passwordRepeat:"",registration:!1,errorMessage:""}},computed:{headerText(){return this.registration?"Регистрация":"Вход в ваш аккаунт"},enterText(){return this.registration?"Зарегистрироваться":"Войти"}},methods:{postRegistration:F,postAuth:G,toggleRegistration(){this.registration=!this.registration},async handleSubmit(){this.errorMessage="";try{if(this.registration){const t=await this.postRegistration({email:this.email,password:this.password,confirm_password:this.passwordRepeat});200===t.status&&await this.handleAuth({email:this.email,password:this.password})}else await this.handleAuth({email:this.email,password:this.password})}catch(t){this.handleErrorResponse(t?.response?.data?.message)}},async handleAuth(t){const e=await this.postAuth(t);200===e.status?(window.localStorage.setItem("access_token",e.data?.accessToken),window.localStorage.setItem("email",this.email),window.location.href="/notes"):this.handleErrorResponse(e.data?.message)}}},Nt=Pt,$t=(0,c.Z)(Nt,wt,yt,!1,null,"208f7faa",null),Zt=$t.exports,It=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-profile"},[e("div",{staticClass:"text-small user-profile__info"},[t._v(" "+t._s(t.email)+" ")]),e("div",{staticClass:"user-profile__toggle"},[e("button-primary",{staticClass:"user-profile__button",on:{click:t.toggleMenu}},[e("template",{slot:"icon"},[e("img",{staticClass:"user-profile__image",attrs:{src:"/user.svg",alt:"user icon"}})])],2),t.showMenu?e("div",{staticClass:"user-profile__logout"},[e("link-primary",{on:{click:t.handleLogout}},[t._v(" Выйти ")])],1):t._e()],1)])},Tt=[],Bt={name:"UserProfile",components:{ButtonPrimary:M,LinkPrimary:St},props:{email:String},data(){return{showMenu:!1}},methods:{toggleMenu(){this.showMenu=!this.showMenu},handleLogout(){this.showMenu=!1,this.$emit("logout")}}},Lt=Bt,qt=(0,c.Z)(Lt,It,Tt,!1,null,"0e49fd9e",null),At=qt.exports,Et={name:"HeaderCommon",components:{ButtonPrimary:M,LoginModal:Zt,UserProfile:At},data(){return{showModal:!1,loggedIn:!1}},computed:{userEmail(){return window.localStorage.getItem("email")}},methods:{async handleLogout(){try{const t=window.localStorage.getItem("access_token");await W(t)}finally{window.localStorage.clear(),window.location.href="/"}},handleShowModal(){this.showModal=!0},handleHideModal(){this.showModal=!1}}},Rt=Et,Ot=(0,c.Z)(Rt,_t,vt,!1,null,"31a37d54",null),jt=Ot.exports;const Vt={"/":m,"/notes":ct,not_found:ft};var zt={name:"App",components:{WelcomePage:m,NotePage:ct,NotFoundPage:ft,HeaderCommon:jt},data(){return{currentPath:window.location.pathname}},computed:{currentView(){return Vt[this.currentPath]||Vt["not_found"]}},mounted(){window.addEventListener("beforeunload",(()=>{this.currentPath=window.location.pathname}))}},Ht=zt,Ft=(0,c.Z)(Ht,a,n,!1,null,null,null),Gt=Ft.exports;s.ZP.config.productionTip=!1,new s.ZP({render:t=>t(Gt)}).$mount("#app")}},e={};function o(s){var a=e[s];if(void 0!==a)return a.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,o),n.exports}o.m=t,function(){var t=[];o.O=function(e,s,a,n){if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],a=t[c][1],n=t[c][2];for(var i=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(o.O).every((function(t){return o.O[t](s[l])}))?s.splice(l--,1):(i=!1,n<r&&(r=n));if(i){t.splice(c--,1);var u=a();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[s,a,n]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,n,r=s[0],i=s[1],l=s[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(l)var c=l(o)}for(e&&e(s);u<r.length;u++)n=r[u],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(c)},s=self["webpackChunkmy_notes"]=self["webpackChunkmy_notes"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(1586)}));s=o.O(s)})();
//# sourceMappingURL=app.3602869e.js.map